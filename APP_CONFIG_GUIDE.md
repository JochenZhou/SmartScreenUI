# APP 内置配置服务器使用说明

## ✅ 已实现功能

### 1. APP 图标更新
- ✅ 从 `src/assets/logo.png` 生成所有尺寸图标
- ✅ 包含圆形图标 (ic_launcher_round.png)
- ✅ 支持所有 Android 分辨率

### 2. APP 内置配置页面
- ✅ 无需外部服务器
- ✅ 其他手机通过局域网访问 APP 设备的 IP 地址
- ✅ 配置通过 localStorage 共享
- ✅ 美观的移动端界面

## 📱 使用方法

### 方式一：在 APP 设备上配置

1. 打开 APP
2. 点击右上角第一个 ⚙️ 图标（远程配置）
3. 进入配置页面
4. 修改配置并保存
5. 返回主界面自动生效

### 方式二：其他手机远程配置

1. **获取 APP 设备 IP 地址**
   - 在 APP 设备上打开设置 → WiFi
   - 查看 IP 地址（例如：192.168.1.100）

2. **在其他手机上访问**
   - 确保在同一 WiFi 网络
   - 打开浏览器
   - 访问：`http://192.168.1.100/config.html`
   - 注意：需要 APP 正在运行

3. **修改配置**
   - 在配置页面修改参数
   - 点击"保存配置"
   - APP 会自动应用新配置

## 🎨 配置页面功能

### Home Assistant 配置
- HA URL：Home Assistant 地址
- Access Token：长期访问令牌
- 天气实体 ID：天气数据源
- 位置名称：显示的位置

### 演示模式
- 一键开关演示模式
- 选择天气状态（14种）
- 快速操作按钮：
  - ☀️ 晴天
  - 🌧️ 大雨
  - ❄️ 大雪
  - ⛈️ 雷雨

## 🔧 技术说明

### 配置存储
- 使用 localStorage 存储配置
- 配置在同一设备的所有页面间共享
- 无需外部数据库

### 网络访问
- APP 使用 Capacitor 的 Web 服务器
- 自动监听设备 IP 地址
- 支持局域网内任意设备访问

### 配置同步
- 配置页面保存后立即生效
- 主界面实时读取 localStorage
- 无需重启 APP

## 📝 注意事项

1. **网络要求**
   - APP 设备和控制设备必须在同一 WiFi
   - 不支持移动数据访问

2. **APP 状态**
   - APP 必须保持运行状态
   - 锁屏后可能无法访问（取决于系统设置）

3. **端口访问**
   - 使用标准 HTTP 端口（80）
   - 无需额外配置端口

4. **安全性**
   - 仅限局域网访问
   - 不建议暴露到公网

## 🚀 构建新版本

```powershell
# 重新生成图标
npm run generate-icons

# 构建 APK
npm run build:android

# 打开 Android Studio
npm run cap:open
```

## 🎯 访问地址示例

假设 APP 设备 IP 是 `192.168.1.100`：

- 配置页面：`http://192.168.1.100/config.html`
- 主界面：`http://192.168.1.100/`

## 💡 提示

- 配置页面针对移动端优化，手机访问体验更好
- 保存配置后会自动返回主界面
- 快速操作按钮可一键切换常用天气效果
